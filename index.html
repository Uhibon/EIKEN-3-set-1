<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boo-riculum EIKEN 3 set 1</title>
  <link rel="icon" type="image/png" href="booha-ghost.png">
  <style>
    :root{
      --ink:#1f2937;
      --muted:#6b7280;
      --paper:#fffaf0;
      --accent:#7c3aed;
      --accent-2:#14b8a6;
      --accent-3:#f59e0b;
      --ok:#22c55e; --bad:#ef4444;
      --bg:#f5f7fb;
    }
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Helvetica, Arial, "Hiragino Kaku Gothic ProN", Meiryo, "Noto Sans JP", sans-serif;
      color:var(--ink);
      background:url('booha-1.jpg') center/cover fixed no-repeat;
      display:grid; grid-template-columns: 80px 1fr; grid-template-rows: 64px 1fr; grid-template-areas:
        "side top"
        "side main";
    }
    .top{
      grid-area:top; display:flex; align-items:center; gap:12px; padding:10px 16px; background:#ffffffbd; backdrop-filter:saturate(1.2) blur(6px); border-bottom:1px solid #e5e7eb; position:sticky; top:0; z-index:10;
    }
    .brand{font-weight:800;}

    .progress{margin-left:auto; display:flex; align-items:center; gap:10px}
    .bar{height:8px; width:180px; background:#e5e7eb; border-radius:999px; overflow:hidden}
    .bar>span{display:block; height:100%; background:linear-gradient(90deg,var(--accent),var(--accent-2)); width:0%}
    .streak{font-size:12px; color:var(--muted)}

    .side{
      grid-area:side; position:sticky; top:0; height:100vh; background:#121826; color:white; display:flex; flex-direction:column; align-items:center; gap:14px; padding:14px 8px;
      font-size:13px; text-align:center;
    }
    .mode{
      width:56px; height:56px; border-radius:12px; background:#1f2937; cursor:pointer; border:1px solid #253244; display:flex; flex-direction:column; justify-content:center; align-items:center; gap:2px;
    }
    .mode.active{background:linear-gradient(180deg,#3b82f6,#8b5cf6); color:white; border-color:transparent}

    .main{grid-area:main; padding:18px;}
    .canvas{max-width:980px; margin:0 auto; display:grid; gap:18px; grid-template-columns: 1fr; align-items:center; justify-items:center;}

    .notecard{
      width:min(780px, 90vw); min-height:260px; background:var(--paper); border:1px solid #e2d6c5; border-radius:20px; box-shadow:0 12px 30px rgba(0,0,0,.07);
      padding:22px 24px; position:relative; overflow:hidden;
    }
    .notecard h2{margin:0 0 8px; font-size:26px}
    .note-sub{color:var(--muted); font-size:15px}
    .big{font-size:38px; font-weight:800;}

    .controls{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top:14px}
    .btn{padding:10px 14px; border-radius:12px; border:1px solid #e5e7eb; background:white; cursor:pointer; font-weight:600}
    .btn.primary{background:var(--accent); color:white; border-color:transparent}

    .toggle{position:absolute; top:12px; right:12px; background:#111827; color:white; font-size:12px; padding:6px 10px; border-radius:999px; cursor:pointer}

    .quiz{display:grid; gap:16px}
    .choice{padding:12px 14px; border:1px solid #e5e7eb; border-radius:12px; background:white; cursor:pointer}
    .choice.correct{border-color:var(--ok); background:#ecfdf5}
    .choice.wrong{border-color:var(--bad); background:#fef2f2}

    .reading{line-height:1.7; font-size:18px}

    /* Play button circle */
    .play-btn{
      width:44px; height:44px; border-radius:50%; border:2px solid var(--accent); background:white; display:flex; justify-content:center; align-items:center;
      cursor:pointer; font-size:20px; color:var(--accent);
    }
    .play-btn:active{transform:scale(.95)}

    @media (max-width:740px){
      body{grid-template-columns:64px 1fr}
      .bar{width:120px}
      .notecard h2{font-size:22px}
      .big{font-size:32px}
    }
  </style>
</head>
<body>
  <aside class="side">
    <div class="ghost" title="Booha buddy">
      <img src="booha-ghost.png" alt="Booha Ghost" style="width:40px;height:auto;display:block;">
    </div>
    <div class="mode active" data-mode="vocab"><div>Vocab</div><div>単語</div></div>
    <div class="mode" data-mode="sentences"><div>Say</div><div>文</div></div>
    <div class="mode" data-mode="qa"><div>Q&A</div><div>質問</div></div>
    <div class="mode" data-mode="reading"><div>Read</div><div>読解</div></div>
    <div class="mode" data-mode="quiz"><div>Quiz</div><div>クイズ</div></div>
  </aside>

  <header class="top">
    <div class="brand">Boo-riculum EIKEN 3 set 1</div>
    <div class="progress">
      <div class="bar"><span id="progress"></span></div>
      <div class="streak"><span id="streak">0</span> correct in a row</div>
    </div>
  </header>

  <main class="main">
    <section class="canvas" id="canvas"></section>
  </main>

  <!-- Templates -->
  <template id="tpl-vocab">
    <div class="notecard">
      <button class="toggle" data-key="lang">JP / EN</button>
      <h2>Vocabulary</h2>
      <div class="big" data-bind="term"></div>
      <div class="note-sub" data-bind="hint"></div>
      <div style="margin-top:16px">
        <div><strong>Example:</strong> <span data-bind="ex"></span></div>
        <div class="note-sub" style="margin-top:6px" data-bind="exjp"></div>
      </div>
      <div class="controls">
        <button class="btn" data-key="prev">◀ Back</button>
        <div class="note-sub"><span data-bind="index"></span>/<span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ▶</button>
      </div>
    </div>
  </template>

  <template id="tpl-sent">
    <div class="notecard">
      <button class="toggle" data-key="lang">JP / EN</button>
      <h2>Useful Sentence</h2>
      <div style="display:flex;align-items:center;gap:10px;margin-top:4px;">
        <div class="big" data-bind="sent"></div>
        <button class="play-btn" data-key="audio">▶</button>
      </div>
      <div class="note-sub" data-bind="sentjp"></div>
      <div class="controls">
        <button class="btn" data-key="prev">◀ Back</button>
        <div class="note-sub"><span data-bind="index"></span>/<span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ▶</button>
      </div>
    </div>
  </template>

  <template id="tpl-qa">
    <div class="notecard">
      <button class="toggle" data-key="lang">JP / EN</button>
      <h2>Interview Practice</h2>
      <div style="display:flex;align-items:center;gap:10px;margin-top:4px;">
        <div class="big" data-bind="q"></div>
        <button class="play-btn" data-key="audio">▶</button>
      </div>
      <div class="note-sub"><strong>Model:</strong> <span data-bind="a"></span></div>
      <div class="note-sub" style="margin-top:6px" data-bind="ajp"></div>
      <div class="controls">
        <button class="btn" data-key="prev">◀ Back</button>
        <div class="note-sub"><span data-bind="index"></span>/<span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ▶</button>
      </div>
    </div>
  </template>

  <template id="tpl-read">
    <div class="notecard"><h2>Reading</h2>
      <div class="reading" data-bind="passage"></div>
      <div class="quiz" style="margin-top:12px" data-bind="qwrap"></div>
      <div class="controls">
        <button class="btn" data-key="prev">◀ Back</button>
        <div class="note-sub"><span data-bind="index"></span>/<span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ▶</button>
      </div>
    </div>
  </template>

  <template id="tpl-quiz">
    <div class="notecard"><h2>Quick Quiz</h2>
      <div style="font-size:22px;font-weight:700" data-bind="q"></div>
      <div class="quiz" style="margin-top:12px" data-bind="choices"></div>
      <div class="controls">
        <button class="btn" data-key="prev">◀ Back</button>
        <div class="note-sub"><span data-bind="index"></span>/<span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ▶</button>
      </div>
    </div>
  </template>

  <script>
    // --- Data (abbreviated, same as before) ---
    const data = {
      vocab: [
        {en:"always", jp:"いつも", ex:"I always do my homework after dinner.", exjp:"私はいつも夕食の後に宿題をします。"},
        {en:"sometimes", jp:"ときどき", ex:"She sometimes goes to the library.", exjp:"彼女はときどき図書館へ行きます。"}
        // ... rest of vocab ...
      ],
      sentences: [
        {en:"May I open the window?", jp:"窓を開けてもいいですか。"},
        {en:"Could you tell me the way to the station?", jp:"駅までの道を教えていただけますか。"}
        // ... rest of sentences ...
      ],
      qa: [
        {q:"What time do you usually get up?", a:"I usually get up at six thirty.", ajp:"たいてい6時30分に起きます。"},
        {q:"What do you do after school?", a:"I do my homework and play soccer.", ajp:"宿題をしてサッカーをします。"}
        // ... rest of qa ...
      ],
      reading: [/* same as before */],
      quiz: [/* same as before */]
    };

    const state = {mode:'vocab',index:0,lang:'EN',streak:0};
    const $=(s,c=document)=>c.querySelector(s);
    const $$=(s,c=document)=>Array.from(c.querySelectorAll(s));

    const audioEl=new Audio();
    function playAudio(src){audioEl.src=src;audioEl.currentTime=0;audioEl.play().catch(e=>console.log("Audio error",e));}

    function render(){
      const wrap=$('#canvas'); wrap.innerHTML='';
      const list=data[state.mode]; const item=list[state.index];
      const tplId={vocab:'tpl-vocab',sentences:'tpl-sent',qa:'tpl-qa',reading:'tpl-read',quiz:'tpl-quiz'}[state.mode];
      const node=document.importNode($("#"+tplId).content,true);

      if(state.mode==='vocab'){
        const showEN=state.lang==='EN';
        $("[data-bind=term]",node).textContent=showEN?item.en:item.jp;
        $("[data-bind=hint]",node).textContent=showEN?item.jp:item.en;
        $("[data-bind=ex]",node).textContent=item.ex;
        $("[data-bind=exjp]",node).textContent=item.exjp;
      }
      if(state.mode==='sentences'){
        const showEN=state.lang==='EN';
        $("[data-bind=sent]",node).textContent=showEN?item.en:item.jp;
        $("[data-bind=sentjp]",node).textContent=showEN?item.jp:item.en;
        const n=state.index+1; // 1..20
        const playBtn = $("[data-key=audio]",node);
        playBtn.addEventListener('click',()=>playAudio(`audio/${n}.m4a`));
      }
      if(state.mode==='qa'){
        const showEN=state.lang==='EN';
        $("[data-bind=q]",node).textContent=item.q;
        $("[data-bind=a]",node).textContent=showEN?item.a:item.ajp;
        $("[data-bind=ajp]",node).textContent=showEN?item.ajp:item.a;
        const n=state.index+21; // 21..40
        const playBtn = $("[data-key=audio]",node);
        playBtn.addEventListener('click',()=>playAudio(`audio/${n}.m4a`));
      }

      $("[data-bind=index]",node)?.append(state.index+1);
      $("[data-bind=total]",node)?.append(list.length);

      let navLock=false;
      function nav(to){
        if(navLock)return; navLock=true;
        if(to==='next'){state.index=(state.index<list.length-1)?state.index+1:0;}
        if(to==='prev'){state.index=(state.index>0)?state.index-1:list.length-1;}
        render(); setTimeout(()=>navLock=false,250);
      }
      $("[data-key=next]",node)?.addEventListener('click',()=>nav('next'));
      $("[data-key=prev]",node)?.addEventListener('click',()=>nav('prev'));

      $(".toggle",node)?.addEventListener('click',()=>{state.lang=(state.lang==='EN')?'JP':'EN';render();});
      wrap.appendChild(node);
      $('#progress').style.width=((state.index+1)/list.length*100)+"%";
    }

    $$(".mode").forEach(m=>{
      m.onclick=()=>{ $$(".mode").forEach(x=>x.classList.remove('active')); m.classList.add('active');
        state.mode=m.dataset.mode; state.index=0; state.lang='EN'; render();
      };
    });

    render();
  </script>
</body>
</html>
