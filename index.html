<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boo-riculum EIKEN 3 set 1</title>
  <link rel="icon" type="image/png" href="booha-ghost.png">
  <style>
    :root{
      --ink:#1f2937; /* slate-800 */
      --muted:#6b7280; /* gray-500 */
      --paper:#fffaf0; /* ivory */
      --accent:#7c3aed; /* violet-600 */
      --accent-2:#14b8a6; /* teal-500 */
      --accent-3:#f59e0b; /* amber-500 */
      --ok:#22c55e; --bad:#ef4444;
      --bg:#f5f7fb;
    }
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Helvetica, Arial, "Hiragino Kaku Gothic ProN", Meiryo, "Noto Sans JP", sans-serif;
      color:var(--ink);
      background:url('booha-1.jpg') center/cover fixed no-repeat;
      display:grid; grid-template-columns: 80px 1fr; grid-template-rows: 64px 1fr; grid-template-areas:
        "side top"
        "side main";
    }
    /* Top bar */
    .top{
      grid-area:top; display:flex; align-items:center; gap:12px; padding:10px 16px; background:#ffffffbd; backdrop-filter:saturate(1.2) blur(6px); border-bottom:1px solid #e5e7eb; position:sticky; top:0; z-index:10;
    }
    .brand{font-weight:800; letter-spacing:.2px}

    .progress{margin-left:auto; display:flex; align-items:center; gap:10px}
    .bar{height:8px; width:180px; background:#e5e7eb; border-radius:999px; overflow:hidden}
    .bar>span{display:block; height:100%; background:linear-gradient(90deg,var(--accent),var(--accent-2)); width:0%}
    .streak{font-size:12px; color:var(--muted)}

    /* Sidebar */
    .side{
      grid-area:side; position:sticky; top:0; height:100vh; background:#121826; color:white; display:flex; flex-direction:column; align-items:center; gap:10px; padding:14px 8px;
    }
    .ghost{line-height:1; margin:8px 0}
    .mode{
      width:56px; height:56px; border-radius:16px; display:grid; place-items:center; background:#1f2937; color:#cbd5e1; cursor:pointer; user-select:none; border:1px solid #253244; transition:transform .12s ease, background .2s;
    }
    .mode:hover{transform:translateY(-2px)}
    .mode.active{background:linear-gradient(180deg,#3b82f6,#8b5cf6); color:white; border-color:transparent}
    .mode small{font-size:10px; opacity:.9; display:block; margin-top:2px}

    /* Main area */
    .main{grid-area:main; padding:18px;}

    /* Card Canvas */
    .canvas{
      max-width:980px; margin:0 auto; display:grid; gap:18px; grid-template-columns: 1fr; align-items:center; justify-items:center;
    }

    .notecard{
      width:min(780px, 90vw); min-height:260px; background:var(--paper); border:1px solid #e2d6c5; border-radius:20px; box-shadow:0 12px 30px rgba(0,0,0,.07);
      padding:22px 24px; position:relative; overflow:hidden;
    }
    .notecard:before{content:""; position:absolute; inset:0; background:repeating-linear-gradient(#0000, #0000 30px, rgba(124,58,237,.06) 31px); pointer-events:none}
    .notecard h2{margin:0 0 8px; font-size:28px}
    .note-sub{color:var(--muted); font-size:15px}
    .big{font-size:40px; font-weight:800; letter-spacing:.2px}

    .controls{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top:14px}
    .btn{padding:10px 14px; border-radius:12px; border:1px solid #e5e7eb; background:white; cursor:pointer; font-weight:600}
    .btn.primary{background:var(--accent); color:white; border-color:transparent}
    .btn.ghost{background:#111827; color:white}

    /* Bottom dock */
    .dock{position:sticky; bottom:0; inset-inline:0; display:flex; gap:10px; justify-content:center; padding:10px; backdrop-filter:blur(8px);}

    /* Toggle */
    .toggle{position:absolute; top:12px; right:12px; background:#111827; color:white; font-size:12px; padding:6px 10px; border-radius:999px; cursor:pointer}

    /* Quiz */
    .quiz{display:grid; gap:16px}
    .choice{padding:12px 14px; border:1px solid #e5e7eb; border-radius:12px; background:white; cursor:pointer}
    .choice.correct{border-color:var(--ok); background:#ecfdf5}
    .choice.wrong{border-color:var(--bad); background:#fef2f2}

    /* Reading */
    .reading{line-height:1.7; font-size:18px}
    .muted{color:var(--muted)}

    /* Responsive */
    @media (max-width:740px){
      body{grid-template-columns:64px 1fr}
      .bar{width:120px}
      .notecard{padding:18px}
      .notecard h2{font-size:24px}
      .big{font-size:34px}
    }
  </style>
</head>
<body>
  <aside class="side" aria-label="Mode selector">
    <div class="ghost" title="Booha buddy">
      <img src="booha-ghost.png" alt="Booha Ghost" style="width:40px;height:auto;display:block;">
    </div>
    <div class="mode active" data-mode="vocab" title="Vocabulary">
      <div>üî§</div><small>Vocab</small>
    </div>
    <div class="mode" data-mode="sentences" title="Useful Sentences">
      <div>üí¨</div><small>Say</small>
    </div>
    <div class="mode" data-mode="qa" title="Interview Q&A">
      <div>üéôÔ∏è</div><small>Q&A</small>
    </div>
    <div class="mode" data-mode="reading" title="Reading">
      <div>üìñ</div><small>Read</small>
    </div>
    <div class="mode" data-mode="quiz" title="Quiz">
      <div>üìù</div><small>Quiz</small>
    </div>
  </aside>

  <header class="top">
    <div class="brand">Boo-riculum EIKEN 3 set 1</div>
    <div class="progress">
      <div class="bar" aria-label="Progress"><span id="progress"></span></div>
      <div class="streak"><span id="streak">0</span> correct in a row</div>
    </div>
  </header>

  <main class="main">
    <section class="canvas" id="canvas"></section>
    <div class="dock"></div>
  </main>

  <template id="tpl-vocab">
    <div class="notecard">
      <button class="toggle" data-key="lang">JP / EN</button>
      <h2 class="muted">Vocabulary</h2>
      <div class="big" data-bind="term"></div>
      <div class="note-sub" data-bind="hint"></div>
      <div style="margin-top:16px">
        <div><strong>Example:</strong> <span data-bind="ex"></span></div>
        <div class="muted" style="margin-top:6px" data-bind="exjp"></div>
      </div>
      <div class="controls">
        <button class="btn" data-key="prev">‚óÄÔ∏é Back</button>
        <div class="muted"><span data-bind="index"></span> / <span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ‚ñ∂Ô∏é</button>
      </div>
    </div>
  </template>

  <template id="tpl-sent">
    <div class="notecard">
      <button class="toggle" data-key="lang">JP / EN</button>
      <h2 class="muted">Useful Sentence</h2>
      <div class="big" data-bind="sent"></div>
      <div class="note-sub" data-bind="sentjp"></div>
      <div class="controls">
        <button class="btn" data-key="prev">‚óÄÔ∏é Back</button>
        <div class="muted"><span data-bind="index"></span> / <span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ‚ñ∂Ô∏é</button>
      </div>
    </div>
  </template>

  <template id="tpl-qa">
    <div class="notecard">
      <button class="toggle" data-key="lang">JP / EN</button>
      <h2 class="muted">Interview Practice</h2>
      <div class="big" data-bind="q"></div>
      <div class="note-sub" style="margin-top:8px"><strong>Model:</strong> <span data-bind="a"></span></div>
      <div class="muted" style="margin-top:6px" data-bind="ajp"></div>
      <div class="controls">
        <button class="btn" data-key="prev">‚óÄÔ∏é Back</button>
        <div class="muted"><span data-bind="index"></span> / <span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ‚ñ∂Ô∏é</button>
      </div>
    </div>
  </template>

  <template id="tpl-read">
    <div class="notecard">
      <h2 class="muted">Reading</h2>
      <div class="reading" data-bind="passage"></div>
      <div class="quiz" style="margin-top:12px" data-bind="qwrap"></div>
      <div class="controls">
        <button class="btn" data-key="prev">‚óÄÔ∏é Back</button>
        <div class="muted"><span data-bind="index"></span> / <span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ‚ñ∂Ô∏é</button>
      </div>
    </div>
  </template>

  <template id="tpl-quiz">
    <div class="notecard">
      <h2 class="muted">Quick Quiz</h2>
      <div style="font-size:22px; font-weight:700" data-bind="q"></div>
      <div class="quiz" style="margin-top:12px" data-bind="choices"></div>
      <div class="controls">
        <button class="btn" data-key="prev">‚óÄÔ∏é Back</button>
        <div class="muted"><span data-bind="index"></span> / <span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ‚ñ∂Ô∏é</button>
      </div>
    </div>
  </template>

  <script>
    // --- Data: EIKEN 3 friendly content (EN/JP) ---
    const data = {
      vocab: [
        {en:"always", jp:"„ÅÑ„Å§„ÇÇ", ex:"I always do my homework after dinner.", exjp:"ÁßÅ„ÅØ„ÅÑ„Å§„ÇÇÂ§ïÈ£ü„ÅÆÂæå„Å´ÂÆøÈ°å„Çí„Åó„Åæ„Åô„ÄÇ"},
        {en:"sometimes", jp:"„Å®„Åç„Å©„Åç", ex:"She sometimes goes to the library.", exjp:"ÂΩºÂ•≥„ÅØ„Å®„Åç„Å©„ÅçÂõ≥Êõ∏È§®„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ"},
        {en:"before", jp:"„Äú„ÅÆÂâç„Å´", ex:"Wash your hands before lunch.", exjp:"ÊòºÈ£ü„ÅÆÂâç„Å´Êâã„ÇíÊ¥ó„ÅÑ„Åæ„Åó„Çá„ÅÜ„ÄÇ"},
        {en:"after", jp:"„Äú„ÅÆÂæå„Åß", ex:"After school, I play soccer.", exjp:"ÊîæË™≤Âæå„ÄÅÁßÅ„ÅØ„Çµ„ÉÉ„Ç´„Éº„Çí„Åó„Åæ„Åô„ÄÇ"},
        {en:"because", jp:"„Äú„Å™„ÅÆ„Åß", ex:"I stayed home because it was rainy.", exjp:"Èõ®„Å†„Å£„Åü„ÅÆ„ÅßÂÆ∂„Å´„ÅÑ„Åæ„Åó„Åü„ÄÇ"},
        {en:"during", jp:"„Äú„ÅÆÈñì", ex:"Be quiet during the test.", exjp:"„ÉÜ„Çπ„Éà„ÅÆÈñì„ÅØÈùô„Åã„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"},
        {en:"invitation", jp:"ÊãõÂæÖ", ex:"Thank you for the invitation.", exjp:"„ÅîÊãõÂæÖ„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ"},
        {en:"visit", jp:"Ë®™„Çå„Çã", ex:"We will visit a museum this Sunday.", exjp:"‰ªäÈÄ±Êó•ÊõúÊó•„Å´ÂçöÁâ©È§®„ÇíË®™„Çå„Åæ„Åô„ÄÇ"},
        {en:"hospital", jp:"ÁóÖÈô¢", ex:"My mother works at a hospital.", exjp:"ÊØç„ÅØÁóÖÈô¢„ÅßÂÉç„ÅÑ„Å¶„ÅÑ„Åæ„Åô„ÄÇ"},
        {en:"station", jp:"ÈßÖ", ex:"Let's meet at the station.", exjp:"ÈßÖ„Åß‰ºö„ÅÑ„Åæ„Åó„Çá„ÅÜ„ÄÇ"},
        {en:"homework", jp:"ÂÆøÈ°å", ex:"Do your homework first.", exjp:"„Åæ„ÅöÂÆøÈ°å„Çí„Åó„Å™„Åï„ÅÑ„ÄÇ"},
        {en:"practice", jp:"Á∑¥Áøí„Åô„Çã", ex:"I practice the piano every day.", exjp:"ÁßÅ„ÅØÊØéÊó•„Éî„Ç¢„Éé„ÇíÁ∑¥Áøí„Åó„Åæ„Åô„ÄÇ"},
        {en:"exercise", jp:"ÈÅãÂãï", ex:"Exercise is good for your health.", exjp:"ÈÅãÂãï„ÅØÂÅ•Â∫∑„Å´ËâØ„ÅÑ„Åß„Åô„ÄÇ"},
        {en:"healthy", jp:"ÂÅ•Â∫∑„Å™", ex:"I want to eat healthy food.", exjp:"ÁßÅ„ÅØÂÅ•Â∫∑ÁöÑ„Å™È£ü„ÅπÁâ©„ÇíÈ£ü„Åπ„Åü„ÅÑ„Åß„Åô„ÄÇ"},
        {en:"weather", jp:"Â§©Ê∞ó", ex:"The weather is sunny today.", exjp:"‰ªäÊó•„ÅØÂ§©Ê∞ó„ÅåÊô¥„Çå„Åß„Åô„ÄÇ"},
        {en:"cloudy", jp:"„Åè„ÇÇ„Çä", ex:"It will be cloudy tomorrow.", exjp:"ÊòéÊó•„ÅØ„Åè„ÇÇ„Çä„Åß„Åó„Çá„ÅÜ„ÄÇ"},
        {en:"windy", jp:"È¢®„ÅåÂº∑„ÅÑ", ex:"It's windy outside.", exjp:"Â§ñ„ÅØÈ¢®„ÅåÂº∑„ÅÑ„Åß„Åô„ÄÇ"},
        {en:"borrow", jp:"ÂÄü„Çä„Çã", ex:"Can I borrow your pen?", exjp:"„Éö„É≥„ÇíÂÄü„Çä„Å¶„ÇÇ„ÅÑ„ÅÑ„Åß„Åô„Åã„ÄÇ"},
        {en:"return", jp:"Ëøî„Åô", ex:"Please return the book by Friday.", exjp:"ÈáëÊõúÊó•„Åæ„Åß„Å´Êú¨„ÇíËøî„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"},
        {en:"stationery", jp:"ÊñáÊàøÂÖ∑", ex:"I bought some stationery.", exjp:"ÊñáÊàøÂÖ∑„ÇíË≤∑„ÅÑ„Åæ„Åó„Åü„ÄÇ"}
      ],
      sentences: [
        {en:"May I open the window?", jp:"Á™ì„ÇíÈñã„Åë„Å¶„ÇÇ„ÅÑ„ÅÑ„Åß„Åô„Åã„ÄÇ"},
        {en:"Could you tell me the way to the station?", jp:"ÈßÖ„Åæ„Åß„ÅÆÈÅì„ÇíÊïô„Åà„Å¶„ÅÑ„Åü„Å†„Åë„Åæ„Åô„Åã„ÄÇ"},
        {en:"I have a sore throat.", jp:"„ÅÆ„Å©„ÅåÁóõ„ÅÑ„Åß„Åô„ÄÇ"},
        {en:"I usually take a bus to school.", jp:"„Åü„ÅÑ„Å¶„ÅÑ„Éê„Çπ„ÅßÂ≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ"},
        {en:"I‚Äôm looking forward to the school trip.", jp:"‰øÆÂ≠¶ÊóÖË°å„ÇíÊ•Ω„Åó„Åø„Å´„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ"},
        {en:"Please speak more slowly.", jp:"„ÇÇ„Å£„Å®„ÇÜ„Å£„Åè„ÇäË©±„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"},
        {en:"I forgot my homework.", jp:"ÂÆøÈ°å„ÇíÂøò„Çå„Åæ„Åó„Åü„ÄÇ"},
        {en:"What time does the library open?", jp:"Âõ≥Êõ∏È§®„ÅØ‰ΩïÊôÇ„Å´Èñã„Åç„Åæ„Åô„Åã„ÄÇ"},
        {en:"Can I try this on?", jp:"„Åì„Çå„ÇíË©¶ÁùÄ„Åß„Åç„Åæ„Åô„Åã„ÄÇ"},
        {en:"It takes about twenty minutes.", jp:"Á¥Ñ20ÂàÜ„Åã„Åã„Çä„Åæ„Åô„ÄÇ"},
        {en:"I have to help my mother.", jp:"ÊØç„ÇíÊâã‰ºù„Çè„Å™„Åë„Çå„Å∞„Å™„Çä„Åæ„Åõ„Çì„ÄÇ"},
        {en:"We don‚Äôt have school today.", jp:"‰ªäÊó•„ÅØÂ≠¶Ê†°„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"},
        {en:"Do you have any plans this weekend?", jp:"ÈÄ±Êú´„ÅÆ‰∫àÂÆö„ÅØ„ÅÇ„Çä„Åæ„Åô„Åã„ÄÇ"},
        {en:"I‚Äôm not sure.", jp:"„Çà„ÅèÂàÜ„Åã„Çä„Åæ„Åõ„Çì„ÄÇ"},
        {en:"Could you pass me the salt?", jp:"Â°©„ÇíÂèñ„Å£„Å¶„Åè„Çå„Åæ„Åô„Åã„ÄÇ"},
        {en:"I need to finish this by tonight.", jp:"‰ªäÂ§ú„Åæ„Åß„Å´„Åì„Çå„ÇíÁµÇ„Çè„Çâ„Åõ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ"},
        {en:"What does this word mean?", jp:"„Åì„ÅÆÂçòË™û„ÅØ„Å©„ÅÜ„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„Åã„ÄÇ"},
        {en:"Can you play any instruments?", jp:"‰Ωï„ÅãÊ•ΩÂô®„ÅåÂºæ„Åë„Åæ„Åô„Åã„ÄÇ"},
        {en:"I was absent from school yesterday.", jp:"Êò®Êó•Â≠¶Ê†°„ÇíÊ¨†Â∏≠„Åó„Åæ„Åó„Åü„ÄÇ"},
        {en:"Don‚Äôt forget to bring your PE uniform.", jp:"‰ΩìÊìçÊúç„ÇíÊåÅ„Å£„Å¶„Åè„Çã„ÅÆ„ÇíÂøò„Çå„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ"}
      ],
      qa: [
        {q:"What time do you usually get up?", a:"I usually get up at six thirty.", ajp:"„Åü„ÅÑ„Å¶„ÅÑ6ÊôÇ30ÂàÜ„Å´Ëµ∑„Åç„Åæ„Åô„ÄÇ"},
        {q:"What do you do after school?", a:"I do my homework and play soccer.", ajp:"ÂÆøÈ°å„Çí„Åó„Å¶„Çµ„ÉÉ„Ç´„Éº„Çí„Åó„Åæ„Åô„ÄÇ"},
        {q:"How do you go to school?", a:"I go to school by bicycle.", ajp:"Ëá™Ëª¢Ëªä„ÅßÂ≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ"},
        {q:"What is your favorite subject?", a:"My favorite subject is English.", ajp:"‰∏ÄÁï™Â•Ω„Åç„Å™ÊïôÁßë„ÅØËã±Ë™û„Åß„Åô„ÄÇ"},
        {q:"What did you do last Sunday?", a:"I visited my grandparents.", ajp:"ÂÖàÈÄ±„ÅÆÊó•ÊõúÊó•„ÅØÁ•ñÁà∂ÊØç„ÇíË®™„Å≠„Åæ„Åó„Åü„ÄÇ"},
        {q:"Where would you like to go in the future?", a:"I‚Äôd like to go to Canada.", ajp:"Â∞ÜÊù•„Ç´„Éä„ÉÄ„Å´Ë°å„Åç„Åü„ÅÑ„Åß„Åô„ÄÇ"},
        {q:"What do you eat for breakfast?", a:"I usually eat toast and eggs.", ajp:"„Åü„ÅÑ„Å¶„ÅÑ„Éà„Éº„Çπ„Éà„Å®Âçµ„ÇíÈ£ü„Åπ„Åæ„Åô„ÄÇ"},
        {q:"Do you belong to any club?", a:"Yes, I‚Äôm in the soccer club.", ajp:"„ÅØ„ÅÑ„ÄÅ„Çµ„ÉÉ„Ç´„ÉºÈÉ®„Å´ÂÖ•„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ"},
        {q:"Tell me about your family.", a:"There are four people in my family.", ajp:"ÂÆ∂Êóè„ÅØ4‰∫∫„Åß„Åô„ÄÇ"},
        {q:"What do you do on weekends?", a:"I hang out with friends or study.", ajp:"Âèã„Å†„Å°„Å®ÈÅä„Å∂„ÅãÂãâÂº∑„Åó„Åæ„Åô„ÄÇ"},
        {q:"Do you have any pets?", a:"Yes, I have a cat.", ajp:"„ÅØ„ÅÑ„ÄÅÁå´„ÇíÈ£º„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ"},
        {q:"What kind of books do you like?", a:"I like mystery books.", ajp:"„Éü„Çπ„ÉÜ„É™„Éº„ÅÆÊú¨„ÅåÂ•Ω„Åç„Åß„Åô„ÄÇ"},
        {q:"What season do you like and why?", a:"I like spring because the weather is warm.", ajp:"Êöñ„Åã„ÅÑ„ÅÆ„ÅßÊò•„ÅåÂ•Ω„Åç„Åß„Åô„ÄÇ"},
        {q:"What time do you go to bed?", a:"I go to bed at ten.", ajp:"10ÊôÇ„Å´ÂØù„Åæ„Åô„ÄÇ"},
        {q:"Who do you admire?", a:"I admire my father.", ajp:"Áà∂„ÇíÂ∞äÊï¨„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ"},
        {q:"Which place would you like to visit in Japan?", a:"I‚Äôd like to visit Kyoto.", ajp:"‰∫¨ÈÉΩ„Å´Ë°å„Åç„Åü„ÅÑ„Åß„Åô„ÄÇ"},
        {q:"How often do you study English?", a:"I study English every day.", ajp:"ÊØéÊó•Ëã±Ë™û„ÇíÂãâÂº∑„Åó„Åæ„Åô„ÄÇ"},
        {q:"What do you do to stay healthy?", a:"I exercise and eat vegetables.", ajp:"ÈÅãÂãï„Åó„Å¶ÈáéËèú„ÇíÈ£ü„Åπ„Åæ„Åô„ÄÇ"},
        {q:"What are you good at?", a:"I‚Äôm good at drawing.", ajp:"Áµµ„ÇíÊèè„Åè„ÅÆ„ÅåÂæóÊÑè„Åß„Åô„ÄÇ"},
        {q:"What do you want to be in the future?", a:"I want to be a teacher.", ajp:"Â∞ÜÊù•„ÅØÂÖàÁîü„Å´„Å™„Çä„Åü„ÅÑ„Åß„Åô„ÄÇ"}
      ],
      reading: [
        {
          passage: `Ken likes plants. Every morning, he waters the flowers in his garden. On Sundays, he visits a small park near his house and takes pictures of trees. He wants to make a book about plants someday.`,
          questions:[
            {q:"What does Ken do every morning?", choices:["He reads books.","He waters the flowers.","He visits a park.","He takes the train."], answer:1},
            {q:"When does Ken visit the park?", choices:["On Sundays","On Fridays","Every night","In winter"], answer:0}
          ]
        },
        {
          passage: `My school has a clean library. Students can borrow two books for one week. I usually borrow a science book and a story book. The library opens at nine and closes at five.`,
          questions:[
            {q:"How many books can students borrow?", choices:["One","Two","Three","Four"], answer:1},
            {q:"What time does the library close?", choices:["Four","Five","Six","Seven"], answer:1}
          ]
        },
        {
          passage: `Yumi‚Äôs town will have a summer festival next month. Many people will wear yukata and enjoy food from small shops. Yumi wants to help at a drink stand with her friends.`,
          questions:[
            {q:"When is the festival?", choices:["This week","Next month","Last year","Tomorrow"], answer:1},
            {q:"What does Yumi want to do?", choices:["Dance on stage","Help at a drink stand","Play baseball","Watch fireworks at home"], answer:1}
          ]
        },
        {
          passage: `Mr. Tanaka has a small bakery. He wakes up at four every morning to bake bread. Many students stop by his shop before school to buy sweet bread.`,
          questions:[
            {q:"What time does Mr. Tanaka wake up?", choices:["At four","At six","At eight","At ten"], answer:0},
            {q:"Who often buys bread there?", choices:["Teachers","Students","Tourists","Doctors"], answer:1}
          ]
        },
        {
          passage: `Our English teacher started a pen-pal project. I write letters to a student in Australia. We talk about school life and favorite sports. I want to visit her someday.`,
          questions:[
            {q:"Where is the pen pal from?", choices:["Canada","Australia","Japan","India"], answer:1},
            {q:"What do they write about?", choices:["Math problems","Weather only","School life and sports","Movies only"], answer:2}
          ]
        },
        {
          passage: `There is a new bus route in my city. The bus comes every fifteen minutes. It is cheaper than the train, so many people use it to go shopping.`,
          questions:[
            {q:"How often does the bus come?", choices:["Every five minutes","Every ten minutes","Every fifteen minutes","Every hour"], answer:2},
            {q:"Why do many people use the bus?", choices:["It is cheaper than the train","It is faster than airplanes","It is free","It is purple"], answer:0}
          ]
        },
        {
          passage: `Aya joined the school art club last year. She practices drawing after school on Tuesdays and Thursdays. Next month, the club will hold a small exhibition in the library.`,
          questions:[
            {q:"When does Aya practice?", choices:["On Mondays and Fridays","On Tuesdays and Thursdays","On Saturdays","Every day"], answer:1},
            {q:"Where will the exhibition be?", choices:["In the gym","In the library","In the park","In a museum"], answer:1}
          ]
        },
        {
          passage: `Taro wants to be a nurse. He likes helping people and studying science. He reads books about hospitals and sometimes watches videos about first aid.`,
          questions:[
            {q:"What does Taro want to be?", choices:["A teacher","A nurse","A cook","A singer"], answer:1},
            {q:"What does he read?", choices:["Comics only","Books about hospitals","Math textbooks","Novels only"], answer:1}
          ]
        },
        {
          passage: `My grandmother grows tomatoes on her balcony. She gives us fresh tomatoes in summer. We often make salad together and talk about her childhood.`,
          questions:[
            {q:"Where does she grow tomatoes?", choices:["In the park","On her balcony","At school","In the forest"], answer:1},
            {q:"What do we make with tomatoes?", choices:["Soup","Salad","Juice","Pizza only"], answer:1}
          ]
        },
        {
          passage: `Our class cleaned the beach last Saturday. We picked up plastic bottles and cans for two hours. After that, we ate lunch and played volleyball.`,
          questions:[
            {q:"What did the class do?", choices:["They went swimming","They cleaned the beach","They studied math","They watched a movie"], answer:1},
            {q:"How long did they clean?", choices:["One hour","Two hours","Three hours","All day"], answer:1}
          ]
        }
      ],
      quiz: [
        {q:"„Äé„ÅÑ„Å§„ÇÇ„Äè„ÅÆËã±Ë™û„ÅØÔºü", choices:["often","always","usually","sometimes"], answer:1},
        {q:"borrow „ÅÆÂèçÂØæ„ÅØÔºü", choices:["return","bring","keep","buy"], answer:0},
        {q:"It is very ____ today. I can‚Äôt use an umbrella.", choices:["sunny","rainy","windy","cloudy"], answer:2},
        {q:"Because „Çí‰Ωø„Å£„Å¶Ê≠£„Åó„ÅÑÊñá„ÅØÔºü", choices:["I go school because bus.","I stayed home because I was sick.","Because I sick, stay home.","I because stayed home."], answer:1},
        {q:"‚ÄòÊñáÊàøÂÖ∑‚Äô „ÅØËã±Ë™û„ÅßÔºü", choices:["library","museum","stationery","bakery"], answer:2},
        {q:"May I open the window? „ÅÆËøî‰∫ã„Å®„Åó„Å¶Ëá™ÁÑ∂„Å™„ÅÆ„ÅØÔºü", choices:["Yes, you may.","No, you don‚Äôt.","Yes, I do.","No, I am."], answer:0},
        {q:"I‚Äôm looking forward to the school trip. „ÅÆÊÑèÂë≥„ÅØÔºü", choices:["‰øÆÂ≠¶ÊóÖË°å„ÅåÂøÉÈÖç„Åß„Åô","‰øÆÂ≠¶ÊóÖË°å„ÇíÊ•Ω„Åó„Åø„Å´„Åó„Å¶„ÅÑ„Åæ„Åô","‰øÆÂ≠¶ÊóÖË°å„Å´ÈÅÖ„Çå„Åæ„Åô","‰øÆÂ≠¶ÊóÖË°å„Çí„ÇÑ„ÇÅ„Åæ„Åô"], answer:1},
        {q:"‚ÄòÁ¥Ñ20ÂàÜ„Åã„Åã„Çä„Åæ„Åô‚Äô „ÅÆËã±Ë®≥„ÅØÔºü", choices:["I take about twenty minutes.","It takes about twenty minutes.","It is twenty about minutes.","Takes twenty minutes about it."], answer:1},
        {q:"healthy „ÅÆÊúÄ„ÇÇËøë„ÅÑÊÑèÂë≥„ÅØÔºü", choices:["Ê•Ω„Åó„ÅÑ","ÂÅ•Â∫∑„Å™","Âøô„Åó„ÅÑ","È´ò„ÅÑ"], answer:1},
        {q:"We don‚Äôt have school today. „ÅÆÊó•Êú¨Ë™û„ÅØÔºü", choices:["‰ªäÊó•„ÅØÂ≠¶Ê†°„Åå„ÅÇ„Çä„Åæ„Åô","‰ªäÊó•„ÅØÂ≠¶Ê†°„Åå„ÅÇ„Çä„Åæ„Åõ„Çì","‰ªäÊó•„ÅØÂ≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô","‰ªäÊó•„ÅØÂÆøÈ°å„Åå„ÅÇ„Çä„Åæ„Åõ„Çì"], answer:1},
        {q:"‚Äò„Äú„ÅÆÈñì‚Äô „ÅÆËã±Ë™û„ÅØÔºü", choices:["before","after","during","between"], answer:2},
        {q:"‚Äò„Åè„ÇÇ„Çä‚Äô „ÅØÔºü", choices:["cloudy","windy","rainy","snowy"], answer:0},
        {q:"Please ____ the book by Friday.", choices:["borrow","keep","read","return"], answer:3},
        {q:"I usually go to school ____ bus.", choices:["by","on","to","in"], answer:0},
        {q:"‚ÄòÊãõÂæÖ‚Äô „ÅØËã±Ë™û„ÅßÔºü", choices:["vacation","invitation","information","station"], answer:1},
        {q:"Can I ____ your pen?", choices:["lend","borrow","buy","open"], answer:1},
        {q:"I have to ____ my mother.", choices:["help","play","watch","enjoy"], answer:0},
        {q:"What time does the library ____?", choices:["close","open","start","stop"], answer:1},
        {q:"He is very ____. He runs every day.", choices:["healthy","hungry","busy","late"], answer:0},
        {q:"‚ÄòÈ¢®„ÅåÂº∑„ÅÑ‚Äô „ÅØËã±Ë™û„ÅßÔºü", choices:["rainy","sunny","windy","storm"], answer:2}
      ]
    };

    // --- State ---
    const state = {
      mode: 'vocab',
      index: 0,
      lang: 'EN', // EN shows English term big; JP toggles
      streak: 0,
      progress: 0
    };

    const $ = (sel, ctx=document) => ctx.querySelector(sel);
    const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

    // --- Render helpers ---
    function setProgress(){
      const total = data[state.mode].length;
      const p = ((state.index+1)/total)*100;
      $('#progress').style.width = p + '%';
    }
    function setStreak(ok){
      state.streak = ok ? state.streak+1 : 0;
      $('#streak').textContent = state.streak;
    }

    function render(){
      const wrap = $('#canvas');
      wrap.innerHTML = '';
      const list = data[state.mode];
      const item = list[state.index];
      const tplId = {
        vocab:'tpl-vocab', sentences:'tpl-sent', qa:'tpl-qa', reading:'tpl-read', quiz:'tpl-quiz'
      }[state.mode];
      const node = document.importNode($("#"+tplId).content, true);

      // Bind per mode
      if(state.mode==='vocab'){
        const showEN = state.lang==='EN';
        $("[data-bind=term]", node).textContent = showEN ? item.en : item.jp;
        $("[data-bind=hint]", node).textContent = showEN ? item.jp : item.en;
        $("[data-bind=ex]", node).textContent = item.ex;
        $("[data-bind=exjp]", node).textContent = item.exjp;
      }
      if(state.mode==='sentences'){
        const showEN = state.lang==='EN';
        $("[data-bind=sent]", node).textContent = showEN ? item.en : item.jp;
        $("[data-bind=sentjp]", node).textContent = showEN ? item.jp : item.en;
      }
      if(state.mode==='qa'){
        const showEN = state.lang==='EN';
        $("[data-bind=q]", node).textContent = item.q;
        $("[data-bind=a]", node).textContent = showEN ? item.a : item.ajp;
        $("[data-bind=ajp]", node).textContent = showEN ? item.ajp : item.a;
      }
      if(state.mode==='reading'){
        $("[data-bind=passage]", node).textContent = item.passage;
        const qwrap = $("[data-bind=qwrap]", node);
        item.questions.forEach((q,qi)=>{
          const qDiv = document.createElement('div');
          qDiv.innerHTML = `<div style="font-weight:700">Q${qi+1}. ${q.q}</div>`;
          q.choices.forEach((c,ci)=>{
            const btn = document.createElement('div');
            btn.className = 'choice'; btn.textContent = c;
            btn.addEventListener('click',()=>{
              if(ci===q.answer){ btn.classList.add('correct'); setStreak(true);} else {btn.classList.add('wrong'); setStreak(false);} 
            }, {once:true});
            qDiv.appendChild(btn);
          });
          qwrap.appendChild(qDiv);
        });
      }
      if(state.mode==='quiz'){
        $("[data-bind=q]", node).textContent = item.q;
        const cWrap = $("[data-bind=choices]", node);
        item.choices.forEach((c,ci)=>{
          const d = document.createElement('div'); d.className='choice'; d.textContent=c;
          d.addEventListener('click',()=>{
            if(ci===item.answer){ d.classList.add('correct'); setStreak(true);} else {d.classList.add('wrong'); setStreak(false);} 
          }, {once:true});
          cWrap.appendChild(d);
        });
      }

      $("[data-bind=index]", node)?.append(state.index+1);
      $("[data-bind=total]", node)?.append(list.length);

      // Nav buttons
      $("[data-key=prev]", node)?.addEventListener('click',()=>{ if(state.index>0){ state.index--; render(); } });
      $("[data-key=next]", node)?.addEventListener('click',()=>{ if(state.index<list.length-1){ state.index++; } else { state.index=0; } render(); });

      // Toggle language (where present)
      $(".toggle", node)?.addEventListener('click',()=>{ state.lang = (state.lang==='EN')? 'JP':'EN'; render(); });

      wrap.appendChild(node);
      setProgress();
    }

    // --- Mode switching ---
    $$(".mode").forEach(m=>{
      m.addEventListener('click',()=>{
        $$(".mode").forEach(x=>x.classList.remove('active'));
        m.classList.add('active');
        state.mode = m.dataset.mode; state.index = 0; state.streak = 0; state.lang='EN';
        render();
      })
    });

    // Keyboard shortcuts
    window.addEventListener('keydown', (e)=>{
      if(['ArrowRight','d','D'].includes(e.key)){ $("[data-key=next]")?.click(); }
      if(['ArrowLeft','a','A'].includes(e.key)){ $("[data-key=prev]")?.click(); }
      if(['t','T',' '].includes(e.key)){ $(".toggle")?.click(); }
    });

    // Init
    render();
  </script>
</body>
</html>
