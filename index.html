<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boo-riculum EIKEN 3 set 1</title>
  <link rel="icon" type="image/png" href="booha-ghost.png">
  <style>
    :root{
      --ink:#1f2937;
      --muted:#6b7280;
      --paper:#fffaf0;
      --accent:#7c3aed;
      --accent-2:#14b8a6;
      --accent-3:#f59e0b;
      --ok:#22c55e; --bad:#ef4444;
      --bg:#f5f7fb;
    }
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Helvetica, Arial, "Hiragino Kaku Gothic ProN", Meiryo, "Noto Sans JP", sans-serif;
      color:var(--ink);
      background:url('booha-1.jpg') center/cover fixed no-repeat;
      display:grid; grid-template-columns: 80px 1fr; grid-template-rows: 64px 1fr; grid-template-areas:
        "side top"
        "side main";
    }
    .top{
      grid-area:top; display:flex; align-items:center; gap:12px; padding:10px 16px; background:#ffffffbd; backdrop-filter:saturate(1.2) blur(6px); border-bottom:1px solid #e5e7eb; position:sticky; top:0; z-index:10;
    }
    .brand{font-weight:800;}

    .progress{margin-left:auto; display:flex; align-items:center; gap:10px}
    .bar{height:8px; width:180px; background:#e5e7eb; border-radius:999px; overflow:hidden}
    .bar>span{display:block; height:100%; background:linear-gradient(90deg,var(--accent),var(--accent-2)); width:0%}
    .streak{font-size:12px; color:var(--muted)}

    .side{
      grid-area:side; position:sticky; top:0; height:100vh; background:#121826; color:white; display:flex; flex-direction:column; align-items:center; gap:14px; padding:14px 8px;
      font-size:13px; text-align:center;
    }
    .mode{
      width:56px; height:56px; border-radius:12px; background:#1f2937; cursor:pointer; border:1px solid #253244; display:flex; flex-direction:column; justify-content:center; align-items:center; gap:2px;
    }
    .mode.active{background:linear-gradient(180deg,#3b82f6,#8b5cf6); color:white; border-color:transparent}

    .main{grid-area:main; padding:18px;}
    .canvas{max-width:980px; margin:0 auto; display:grid; gap:18px; grid-template-columns: 1fr; align-items:center; justify-items:center;}

    .notecard{
      width:min(780px, 90vw); min-height:260px; background:var(--paper); border:1px solid #e2d6c5; border-radius:20px; box-shadow:0 12px 30px rgba(0,0,0,.07);
      padding:22px 24px; position:relative; overflow:hidden;
    }
    .notecard h2{margin:0 0 8px; font-size:26px}
    .note-sub{color:var(--muted); font-size:15px}
    .big{font-size:38px; font-weight:800;}

    .controls{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top:14px}
    .btn{padding:10px 14px; border-radius:12px; border:1px solid #e5e7eb; background:white; cursor:pointer; font-weight:600}
    .btn.primary{background:var(--accent); color:white; border-color:transparent}

    .toggle{position:absolute; top:12px; right:12px; background:#111827; color:white; font-size:12px; padding:6px 10px; border-radius:999px; cursor:pointer}

    .quiz{display:grid; gap:16px}
    .choice{padding:12px 14px; border:1px solid #e5e7eb; border-radius:12px; background:white; cursor:pointer}
    .choice.correct{border-color:var(--ok); background:#ecfdf5}
    .choice.wrong{border-color:var(--bad); background:#fef2f2}

    .reading{line-height:1.7; font-size:18px}

    /* Play button circle */
    .play-btn{
      width:44px; height:44px; border-radius:50%; border:2px solid var(--accent); background:white; display:flex; justify-content:center; align-items:center;
      cursor:pointer; font-size:20px; color:var(--accent);
    }
    .play-btn:active{transform:scale(.95)}

    @media (max-width:740px){
      body{grid-template-columns:64px 1fr}
      .bar{width:120px}
      .notecard h2{font-size:22px}
      .big{font-size:32px}
    }
  </style>
</head>
<body>
  <aside class="side">
    <div class="mode active" data-mode="vocab"><div>Vocab</div><div>単語</div></div>
    <div class="mode" data-mode="sentences"><div>Say</div><div>文</div></div>
    <div class="mode" data-mode="qa"><div>Q&A</div><div>質問</div></div>
    <div class="mode" data-mode="reading"><div>Read</div><div>読解</div></div>
    <div class="mode" data-mode="quiz"><div>Quiz</div><div>クイズ</div></div>
  </aside>

  <header class="top">
    <div class="brand">Boo-riculum EIKEN 3 set 1</div>
    <div class="progress">
      <div class="bar"><span id="progress"></span></div>
      <div class="streak"><span id="streak">0</span> correct in a row</div>
    </div>
  </header>

  <main class="main">
    <section class="canvas" id="canvas"></section>
  </main>

  <!-- Templates -->
  <template id="tpl-vocab">
    <div class="notecard">
      <button class="toggle" data-key="lang">JP / EN</button>
      <h2>Vocabulary</h2>
      <div class="big" data-bind="term"></div>
      <div class="note-sub" data-bind="hint"></div>
      <div style="margin-top:16px">
        <div><strong>Example:</strong> <span data-bind="ex"></span></div>
        <div class="note-sub" style="margin-top:6px" data-bind="exjp"></div>
      </div>
      <div class="controls">
        <button class="btn" data-key="prev">◀ Back</button>
        <div class="note-sub"><span data-bind="index"></span>/<span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ▶</button>
      </div>
    </div>
  </template>

  <template id="tpl-sent">
    <div class="notecard">
      <button class="toggle" data-key="lang">JP / EN</button>
      <h2>Useful Sentence</h2>
      <div style="display:flex;align-items:center;gap:10px;margin-top:4px;">
        <div class="big" data-bind="sent"></div>
        <button class="play-btn" data-key="audio">▶</button>
      </div>
      <div class="note-sub" data-bind="sentjp"></div>
      <div class="controls">
        <button class="btn" data-key="prev">◀ Back</button>
        <div class="note-sub"><span data-bind="index"></span>/<span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ▶</button>
      </div>
    </div>
  </template>

  <template id="tpl-qa">
    <div class="notecard">
      <button class="toggle" data-key="lang">JP / EN</button>
      <h2>Interview Practice</h2>
      <div style="display:flex;align-items:center;gap:10px;margin-top:4px;">
        <div class="big" data-bind="q"></div>
        <button class="play-btn" data-key="audio">▶</button>
      </div>
      <div class="note-sub"><strong>Model:</strong> <span data-bind="a"></span></div>
      <div class="note-sub" style="margin-top:6px" data-bind="ajp"></div>
      <div class="controls">
        <button class="btn" data-key="prev">◀ Back</button>
        <div class="note-sub"><span data-bind="index"></span>/<span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ▶</button>
      </div>
    </div>
  </template>

  <template id="tpl-read">
    <div class="notecard"><h2>Reading</h2>
      <div class="reading" data-bind="passage"></div>
      <div class="quiz" style="margin-top:12px" data-bind="qwrap"></div>
      <div class="controls">
        <button class="btn" data-key="prev">◀ Back</button>
        <div class="note-sub"><span data-bind="index"></span>/<span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ▶</button>
      </div>
    </div>
  </template>

  <template id="tpl-quiz">
    <div class="notecard"><h2>Quick Quiz</h2>
      <div style="font-size:22px;font-weight:700" data-bind="q"></div>
      <div class="quiz" style="margin-top:12px" data-bind="choices"></div>
      <div class="controls">
        <button class="btn" data-key="prev">◀ Back</button>
        <div class="note-sub"><span data-bind="index"></span>/<span data-bind="total"></span></div>
        <button class="btn primary" data-key="next">Next ▶</button>
      </div>
    </div>
  </template>

  <script>
    // --- Full Data from your working version ---
    const data = {
      vocab: [
        {en:"always", jp:"いつも", ex:"I always do my homework after dinner.", exjp:"私はいつも夕食の後に宿題をします。"},
        {en:"sometimes", jp:"ときどき", ex:"She sometimes goes to the library.", exjp:"彼女はときどき図書館へ行きます。"},
        {en:"before", jp:"〜の前に", ex:"Wash your hands before lunch.", exjp:"昼食の前に手を洗いましょう。"},
        {en:"after", jp:"〜の後で", ex:"After school, I play soccer.", exjp:"放課後、私はサッカーをします。"},
        {en:"because", jp:"〜なので", ex:"I stayed home because it was rainy.", exjp:"雨だったので家にいました。"},
        {en:"during", jp:"〜の間", ex:"Be quiet during the test.", exjp:"テストの間は静かにしてください。"},
        {en:"invitation", jp:"招待", ex:"Thank you for the invitation.", exjp:"ご招待ありがとうございます。"},
        {en:"visit", jp:"訪れる", ex:"We will visit a museum this Sunday.", exjp:"今週日曜日に博物館を訪れます。"},
        {en:"hospital", jp:"病院", ex:"My mother works at a hospital.", exjp:"母は病院で働いています。"},
        {en:"station", jp:"駅", ex:"Let's meet at the station.", exjp:"駅で会いましょう。"},
        {en:"homework", jp:"宿題", ex:"Do your homework first.", exjp:"まず宿題をしなさい。"},
        {en:"practice", jp:"練習する", ex:"I practice the piano every day.", exjp:"私は毎日ピアノを練習します。"},
        {en:"exercise", jp:"運動", ex:"Exercise is good for your health.", exjp:"運動は健康に良いです。"},
        {en:"healthy", jp:"健康な", ex:"I want to eat healthy food.", exjp:"私は健康的な食べ物を食べたいです。"},
        {en:"weather", jp:"天気", ex:"The weather is sunny today.", exjp:"今日は天気が晴れです。"},
        {en:"cloudy", jp:"くもり", ex:"It will be cloudy tomorrow.", exjp:"明日はくもりでしょう。"},
        {en:"windy", jp:"風が強い", ex:"It's windy outside.", exjp:"外は風が強いです。"},
        {en:"borrow", jp:"借りる", ex:"Can I borrow your pen?", exjp:"ペンを借りてもいいですか。"},
        {en:"return", jp:"返す", ex:"Please return the book by Friday.", exjp:"金曜日までに本を返してください。"},
        {en:"stationery", jp:"文房具", ex:"I bought some stationery.", exjp:"文房具を買いました。"}
      ],
      sentences: [
        {en:"May I open the window?", jp:"窓を開けてもいいですか。"},
        {en:"Could you tell me the way to the station?", jp:"駅までの道を教えていただけますか。"},
        {en:"I have a sore throat.", jp:"のどが痛いです。"},
        {en:"I usually take a bus to school.", jp:"たいていバスで学校へ行きます。"},
        {en:"I’m looking forward to the school trip.", jp:"修学旅行を楽しみにしています。"},
        {en:"Please speak more slowly.", jp:"もっとゆっくり話してください。"},
        {en:"I forgot my homework.", jp:"宿題を忘れました。"},
        {en:"What time does the library open?", jp:"図書館は何時に開きますか。"},
        {en:"Can I try this on?", jp:"これを試着できますか。"},
        {en:"It takes about twenty minutes.", jp:"約20分かかります。"},
        {en:"I have to help my mother.", jp:"母を手伝わなければなりません。"},
        {en:"We don’t have school today.", jp:"今日は学校がありません。"},
        {en:"Do you have any plans this weekend?", jp:"週末の予定はありますか。"},
        {en:"I’m not sure.", jp:"よく分かりません。"},
        {en:"Could you pass me the salt?", jp:"塩を取ってくれますか。"},
        {en:"I need to finish this by tonight.", jp:"今夜までにこれを終わらせる必要があります。"},
        {en:"What does this word mean?", jp:"この単語はどういう意味ですか。"},
        {en:"Can you play any instruments?", jp:"何か楽器が弾けますか。"},
        {en:"I was absent from school yesterday.", jp:"昨日学校を欠席しました。"},
        {en:"Don’t forget to bring your PE uniform.", jp:"体操服を持ってくるのを忘れないでください。"}
      ],
      qa: [
        {q:"What time do you usually get up?", a:"I usually get up at six thirty.", ajp:"たいてい6時30分に起きます。"},
        {q:"What do you do after school?", a:"I do my homework and play soccer.", ajp:"宿題をしてサッカーをします。"},
        {q:"How do you go to school?", a:"I go to school by bicycle.", ajp:"自転車で学校へ行きます。"},
        {q:"What is your favorite subject?", a:"My favorite subject is English.", ajp:"一番好きな教科は英語です。"},
        {q:"What did you do last Sunday?", a:"I visited my grandparents.", ajp:"先週の日曜日は祖父母を訪ねました。"},
        {q:"Where would you like to go in the future?", a:"I’d like to go to Canada.", ajp:"将来カナダに行きたいです。"},
        {q:"What do you eat for breakfast?", a:"I usually eat toast and eggs.", ajp:"たいていトーストと卵を食べます。"},
        {q:"Do you belong to any club?", a:"Yes, I’m in the soccer club.", ajp:"はい、サッカー部に入っています。"},
        {q:"Tell me about your family.", a:"There are four people in my family.", ajp:"家族は4人です。"},
        {q:"What do you do on weekends?", a:"I hang out with friends or study.", ajp:"友だちと遊ぶか勉強します。"},
        {q:"Do you have any pets?", a:"Yes, I have a cat.", ajp:"はい、猫を飼っています。"},
        {q:"What kind of books do you like?", a:"I like mystery books.", ajp:"ミステリーの本が好きです。"},
        {q:"What season do you like and why?", a:"I like spring because the weather is warm.", ajp:"暖かいので春が好きです。"},
        {q:"What time do you go to bed?", a:"I go to bed at ten.", ajp:"10時に寝ます。"},
        {q:"Who do you admire?", a:"I admire my father.", ajp:"父を尊敬しています。"},
        {q:"Which place would you like to visit in Japan?", a:"I’d like to visit Kyoto.", ajp:"京都に行きたいです。"},
        {q:"How often do you study English?", a:"I study English every day.", ajp:"毎日英語を勉強します。"},
        {q:"What do you do to stay healthy?", a:"I exercise and eat vegetables.", ajp:"運動して野菜を食べます。"},
        {q:"What are you good at?", a:"I’m good at drawing.", ajp:"絵を描くのが得意です。"},
        {q:"What do you want to be in the future?", a:"I want to be a teacher.", ajp:"将来は先生になりたいです。"}
      ],
      reading: [
        {
          passage: `Ken likes plants. Every morning, he waters the flowers in his garden. On Sundays, he visits a small park near his house and takes pictures of trees. He wants to make a book about plants someday.`,
          questions:[
            {q:"What does Ken do every morning?", choices:["He reads books.","He waters the flowers.","He visits a park.","He takes the train."], answer:1},
            {q:"When does Ken visit the park?", choices:["On Sundays","On Fridays","Every night","In winter"], answer:0}
          ]
        },
        {
          passage: `My school has a clean library. Students can borrow two books for one week. I usually borrow a science book and a story book. The library opens at nine and closes at five.`,
          questions:[
            {q:"How many books can students borrow?", choices:["One","Two","Three","Four"], answer:1},
            {q:"What time does the library close?", choices:["Four","Five","Six","Seven"], answer:1}
          ]
        },
        {
          passage: `Yumi’s town will have a summer festival next month. Many people will wear yukata and enjoy food from small shops. Yumi wants to help at a drink stand with her friends.`,
          questions:[
            {q:"When is the festival?", choices:["This week","Next month","Last year","Tomorrow"], answer:1},
            {q:"What does Yumi want to do?", choices:["Dance on stage","Help at a drink stand","Play baseball","Watch fireworks at home"], answer:1}
          ]
        },
        {
          passage: `Mr. Tanaka has a small bakery. He wakes up at four every morning to bake bread. Many students stop by his shop before school to buy sweet bread.`,
          questions:[
            {q:"What time does Mr. Tanaka wake up?", choices:["At four","At six","At eight","At ten"], answer:0},
            {q:"Who often buys bread there?", choices:["Teachers","Students","Tourists","Doctors"], answer:1}
          ]
        },
        {
          passage: `Our English teacher started a pen-pal project. I write letters to a student in Australia. We talk about school life and favorite sports. I want to visit her someday.`,
          questions:[
            {q:"Where is the pen pal from?", choices:["Canada","Australia","Japan","India"], answer:1},
            {q:"What do they write about?", choices:["Math problems","Weather only","School life and sports","Movies only"], answer:2}
          ]
        }
      ],
      quiz: [
        {q:"『いつも』の英語は？", choices:["often","always","usually","sometimes"], answer:1},
        {q:"borrow の反対は？", choices:["return","bring","keep","buy"], answer:0},
        {q:"It is very ____ today. I can’t use an umbrella.", choices:["sunny","rainy","windy","cloudy"], answer:2},
        {q:"Because を使って正しい文は？", choices:["I go school because bus.","I stayed home because I was sick.","Because I sick, stay home.","I because stayed home."], answer:1},
        {q:"‘文房具’ は英語で？", choices:["library","museum","stationery","bakery"], answer:2}
      ]
    };

    // --- State ---
    const state = {mode:'vocab',index:0,lang:'EN',streak:0};
    const $=(s,c=document)=>c.querySelector(s);
    const $$=(s,c=document)=>Array.from(c.querySelectorAll(s));

    const audioEl=new Audio();
    function playAudio(src){audioEl.src=src;audioEl.currentTime=0;audioEl.play().catch(e=>console.log("Audio error",e));}

    function render(){
      const wrap=$('#canvas'); wrap.innerHTML='';
      const list=data[state.mode]; const item=list[state.index];
      const tplId={vocab:'tpl-vocab',sentences:'tpl-sent',qa:'tpl-qa',reading:'tpl-read',quiz:'tpl-quiz'}[state.mode];
      const node=document.importNode($("#"+tplId).content,true);

      if(state.mode==='vocab'){
        const showEN=state.lang==='EN';
        $("[data-bind=term]",node).textContent=showEN?item.en:item.jp;
        $("[data-bind=hint]",node).textContent=showEN?item.jp:item.en;
        $("[data-bind=ex]",node).textContent=item.ex;
        $("[data-bind=exjp]",node).textContent=item.exjp;
      }
      if(state.mode==='sentences'){
        const showEN=state.lang==='EN';
        $("[data-bind=sent]",node).textContent=showEN?item.en:item.jp;
        $("[data-bind=sentjp]",node).textContent=showEN?item.jp:item.en;
        const n=state.index+1; // 1..20
        $("[data-key=audio]",node).onclick=()=>playAudio(`audio/${n}.m4a`);
      }
      if(state.mode==='qa'){
        const showEN=state.lang==='EN';
        $("[data-bind=q]",node).textContent=item.q;
        $("[data-bind=a]",node).textContent=showEN?item.a:item.ajp;
        $("[data-bind=ajp]",node).textContent=showEN?item.ajp:item.a;
        const n=state.index+21; // 21..40
        $("[data-key=audio]",node).onclick=()=>playAudio(`audio/${n}.m4a`);
      }
      if(state.mode==='reading'){
        $("[data-bind=passage]",node).textContent=item.passage;
        const qwrap=$("[data-bind=qwrap]",node);
        item.questions.forEach((q,qi)=>{
          const qDiv=document.createElement('div');
          qDiv.innerHTML=`<div style="font-weight:700">Q${qi+1}. ${q.q}</div>`;
          q.choices.forEach((c,ci)=>{
            const btn=document.createElement('div');
            btn.className='choice'; btn.textContent=c;
            btn.addEventListener('click',()=>{
              if(ci===q.answer){btn.classList.add('correct');}else{btn.classList.add('wrong');}
            },{once:true});
            qDiv.appendChild(btn);
          });
          qwrap.appendChild(qDiv);
        });
      }
      if(state.mode==='quiz'){
        $("[data-bind=q]",node).textContent=item.q;
        const cWrap=$("[data-bind=choices]",node);
        item.choices.forEach((c,ci)=>{
          const d=document.createElement('div'); d.className='choice'; d.textContent=c;
          d.addEventListener('click',()=>{if(ci===item.answer){d.classList.add('correct');}else{d.classList.add('wrong');}}, {once:true});
          cWrap.appendChild(d);
        });
      }

      $("[data-bind=index]",node)?.append(state.index+1);
      $("[data-bind=total]",node)?.append(list.length);

      // Debounced navigation
      let navLock=false;
      function nav(to){
        if(navLock)return; navLock=true;
        if(to==='next'){state.index=(state.index<list.length-1)?state.index+1:0;}
        if(to==='prev'){state.index=(state.index>0)?state.index-1:list.length-1;}
        render(); setTimeout(()=>navLock=false,250);
      }
      $("[data-key=next]",node)?.addEventListener('click',()=>nav('next'));
      $("[data-key=prev]",node)?.addEventListener('click',()=>nav('prev'));

      $(".toggle",node)?.addEventListener('click',()=>{state.lang=(state.lang==='EN')?'JP':'EN';render();});
      wrap.appendChild(node);
      $('#progress').style.width=((state.index+1)/list.length*100)+"%";
    }

    $$(".mode").forEach(m=>{
      m.onclick=()=>{ $$(".mode").forEach(x=>x.classList.remove('active')); m.classList.add('active');
        state.mode=m.dataset.mode; state.index=0; state.lang='EN'; render();
      };
    });

    render();
  </script>
</body>
</html>
